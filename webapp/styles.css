html, body {
    height: 100%;
}

body {
    font-family: Arial, sans-serif;
    background-color: #2c3e50;
    color: white;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    text-align: center;
    /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—Ä–µ—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
       –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω–µ–π
       (—Ç–∞–º —Å–∫—Ä–æ–ª–ª–∏–º –≤–Ω—É—Ç—Ä–∏ #screen-levels). */
    overflow: hidden;
    user-select: none; /* –ß—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –Ω–µ –≤—ã–¥–µ–ª—è–ª—Å—è –ø—Ä–∏ –∫–ª–∏–∫–∞—Ö */
    -webkit-tap-highlight-color: transparent;
}

/* –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö WebView (Telegram Android/iOS) –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ body —á–∞—Å—Ç–æ
   –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –Ω–∏–∂–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–∫–Ω–æ–ø–∫–∏ –Ω–∞ –§–ò–ù–ò–®) –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏
   –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏. –ù–∞ —É–∑–∫–∏—Ö/–Ω–∏–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –ø—Ä–∏–∂–∏–º–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –∫ –≤–µ—Ä—Ö—É –∏ –¥–∞—ë–º –æ—Ç—Å—Ç—É–ø—ã
   —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ –æ–±–ª–∞—Å—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫–∏. */
@media (max-width: 900px), (max-height: 740px) {
    body {
        justify-content: flex-start;
        padding-top: 18px;
        padding-bottom: 90px; /* –º–µ—Å—Ç–æ –ø–æ–¥ fixed –Ω–∏–∂–Ω—é—é –ø–∞–Ω–µ–ª—å, –µ—Å–ª–∏ –æ–Ω–∞ –ø–æ—è–≤–∏—Ç—Å—è */
        min-height: 100vh;
        min-height: 100dvh;
    }
}

/* PERF: blur/backdrop-filter –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ–π –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ iOS).
   –í–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã –≤—ã–∫–ª—é—á–∞–µ–º –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–¥–Ω—è—Ç—å FPS. */
#doodle-container.game-running .doodle-control {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
}

h1, h2 {
    margin-bottom: 10px;
}

p {
    color: #bdc3c7;
    margin-bottom: 20px;
}

/* === –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞–º–∏ === */
.screen {
    display: none;
    width: 90%;
    max-width: 400px;
    padding: 20px;
    box-sizing: border-box;

    /* Mobile/WebView safety:
       In Telegram WebView the viewport height is fixed and the body is vertically centered.
       When content becomes taller (e.g., FINISH stats list), bottom buttons may fall below
       the visible area. Make each screen scrollable within itself.
    */
    /* Fallback –¥–ª—è WebView –±–µ–∑ dvh */
    max-height: calc(100vh - 40px);
    /* Fallback: —Å–Ω–∞—á–∞–ª–∞ 100vh (–≤–µ–∑–¥–µ), –∑–∞—Ç–µ–º 100dvh (—Ç–æ—á–Ω–µ–µ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö) */
    max-height: calc(100vh - 40px);
    max-height: calc(100dvh - 40px);
    /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç–∫—Ä–∞–Ω—ã –ù–ï –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é—Ç—Å—è. */
    overflow: hidden;
    touch-action: manipulation;
}

/* –†–∞–∑—Ä–µ—à–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –¢–û–õ–¨–ö–û –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω–µ–π */
#screen-levels {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y;
}

/* =====================
   ADMIN PANEL
   ===================== */
body.admin-body {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch;
    justify-content: flex-start; /* –Ω–µ –ø—Ä–∏–∂–∏–º–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –∫ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    align-items: center;
    padding-top: 18px;
    padding-bottom: 24px;
}

.admin-screen {
    /* –∞–¥–º–∏–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ —Å–∫—Ä–æ–ª–ª–∏—Ç—å—Å—è –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ */
    max-width: 1000px;
    width: 92%;
    max-height: none;
    overflow: visible;
    text-align: center;
    /* —Ä–∞–∑—Ä–µ—à–∞–µ–º —Å–≤–∞–π–ø-—Å–∫—Ä–æ–ª–ª (—É .screen –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é touch-action: none) */
    touch-action: pan-y;
}

.admin-wrap {
    width: 100%;
    max-width: 900px;
    margin: 0 auto;
}

.admin-home {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px;
    justify-content: center;
    margin: 16px auto 10px;
}

.admin-home-btn {
    width: 100%;
}

.admin-page-head {
    display: grid;
    grid-template-columns: auto minmax(0, 1fr) auto;
    gap: 10px;
    align-items: center;
    justify-items: center;
    margin: 12px 0 10px;
}

.admin-page-title {
    font-weight: 800;
    text-align: center;
}

.admin-actions {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin: 12px 0;
}

.admin-nav {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin: 14px 0 10px;
}

/* –¢–∞–±—ã –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ */

.admin-tab {
    min-width: 160px;
}

.admin-tab.active {
    outline: 2px solid rgba(255,255,255,0.35);
}

.admin-panels {
    width: 100%;
    display: flex;
    justify-content: center;
}

.admin-panel {
    width: 100%;
    max-width: 900px;
}

.admin-panel[aria-hidden="true"] {
    display: none;
}

.admin-row {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
}

.admin-input {
    flex: 1;
    min-width: 220px;
    padding: 10px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.15);
    background: rgba(0,0,0,0.15);
    color: #fff;
}

.admin-levels {
    display: grid;
    gap: 10px;
    margin-top: 10px;
}

/* –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ò–≥—Ä—ã" —Å–ø–∏—Å–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–ª–∏–Ω–Ω—ã–º ‚Äî –¥–µ–ª–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —É–¥–æ–±–Ω–æ–π */
#screen-admin-levels .admin-levels {
    max-height: none;
    overflow: visible;
}

@media (max-width: 720px) {
    .admin-home {
        grid-template-columns: 1fr;
    }
    .admin-page-head {
        grid-template-columns: 1fr;
    }
    .admin-page-head .btn {
        width: 100%;
    }
}

.screen.active {
    display: block;
    animation: fadeIn 0.5s;
}

/* –§–ò–ù–ò–®: –∫–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—ã—á–Ω—ã–º –±–ª–æ–∫–æ–º –ø—Ä—è–º–æ –ø–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
   (–±–µ–∑ sticky/absolute), —á—Ç–æ–±—ã –Ω–∞ Android WebView –æ–Ω–∏ –Ω–µ "–ø—Ä–æ–ø–∞–¥–∞–ª–∏". */
.final-actions {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 12px;
}

.final-actions .btn {
    /* –ù–∞ —Ñ–∏–Ω–∞–ª–µ ‚Äî –∫–∞–∫ –∏ –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö ‚Äî –ø–æ —à–∏—Ä–∏–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    width: 100%;
}

@media (max-width: 520px) {
    .final-score-box { margin: 16px 0; padding: 16px; }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* === –ö–Ω–æ–ø–∫–∏ === */
.btn {
    background-color: #e67e22;
    color: white;
    border: none;
    padding: 15px 30px;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
    margin-top: 20px;
    width: 100%;
    font-weight: bold;
    transition: transform 0.1s, background-color 0.2s;
}

.btn:active {
    transform: scale(0.98);
}

.btn:hover {
    background-color: #d35400;
}

.hidden {
    /*
      Important: some UI blocks (e.g. .bottombar) define their own `display` later in the CSS.
      Without `!important` the later rule wins and "hidden" elements may become visible.
    */
    display: none !important;
}

/* === –í–µ—Ä—Ö–Ω—è—è –∫–Ω–æ–ø–∫–∞ "–ö —É—Ä–æ–≤–Ω—è–º" –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è === */
.topbar {
    position: fixed;
    /* –ß—É—Ç—å –≤—ã—à–µ, —á—Ç–æ–±—ã –ø–∞–Ω–µ–ª—å –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–µ—Å—Ç–∞ –≤ Telegram WebView */
    top: calc(env(safe-area-inset-top, 0px) + 6px);
    left: 10px;
    z-index: 1001; /* –ø–æ–≤–µ—Ä—Ö –∏–≥—Ä–æ–≤—ã—Ö –æ–≤–µ—Ä–ª–µ–µ–≤ */
    width: auto;
}

.topbar-btn {
    background: rgba(0,0,0,0.25);
    color: white;
    border: 1px solid rgba(255,255,255,0.35);
    border-radius: 12px;
    padding: 10px 12px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
}

.topbar-btn:active {
    transform: scale(0.98);
}

/* === –ö–Ω–æ–ø–∫–∞ "–ó–≤—É–∫" (—Ç–æ–ª—å–∫–æ –º–µ–Ω—é) === */
.sound-toggle {
    position: fixed;
    /* –ß—É—Ç—å –≤—ã—à–µ, —á—Ç–æ–±—ã –ø–∞–Ω–µ–ª—å –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–µ—Å—Ç–∞ –≤ Telegram WebView */
    top: calc(env(safe-area-inset-top, 0px) + 6px);
    right: 10px;
    z-index: 1001;
    background: rgba(0,0,0,0.25);
    color: white;
    border: 1px solid rgba(255,255,255,0.35);
    border-radius: 12px;
    padding: 10px 12px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
}

.sound-toggle:active {
    transform: scale(0.98);
}

/* === –£–†–û–í–ï–ù–¨ 1: –ü–ê–ó–õ (–ê–Ω–∏–º–∞—Ü–∏—è) === */
#puzzle-board {
    position: relative; /* –ë–∞–∑–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç */
    width: 300px;
    height: 300px;
    margin: 0 auto;
    background: #2c3e50; /* –§–æ–Ω –ø–æ–¥ –ø–∞–∑–ª–æ–º */
}

.puzzle-piece {
    position: absolute; /* –≠–ª–µ–º–µ–Ω—Ç—ã –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ board */
    width: 33.33%;      /* –¢—Ä–µ—Ç—å —à–∏—Ä–∏–Ω—ã */
    height: 33.33%;     /* –¢—Ä–µ—Ç—å –≤—ã—Å–æ—Ç—ã */

    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: center;

    cursor: pointer;
    border: 1px solid #bdc3c7;
    box-sizing: border-box;
    border-radius: 4px;

    /* –ú–∞–≥–∏—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ */
    transition: top 0.3s ease-in-out, left 0.3s ease-in-out, transform 0.2s, border-color 0.2s;
}

.puzzle-piece:hover {
    z-index: 5; /* –ü–æ–¥—ã–º–∞–µ–º –≤—ã—à–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    border-color: white;
}

/* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ */
.puzzle-piece.selected {
    border: 3px solid #e74c3c;
    z-index: 10;
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
}

#puzzle-status {
    font-weight: bold;
    min-height: 24px;
    margin-top: 15px;
}

/* === –£–†–û–í–ï–ù–¨ 2: –ü–†–û–í–û–î–ê === */

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∏–≥—Ä—ã */
#wires-game-area {
    position: relative; /* –ß—Ç–æ–±—ã –≤–Ω—É—Ç—Ä–∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å canvas */
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 300px;
    height: 300px;
    margin: 0 auto;
}

#wire-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* –ß—Ç–æ–±—ã –∫–ª–∏–∫–∏ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Å–∫–≤–æ–∑—å —Ö–æ–ª—Å—Ç –∫ –∫–Ω–æ–ø–∫–∞–º */
    z-index: 1;
}

.wire-col {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    height: 100%;
    z-index: 2; /* –ü–æ–≤–µ—Ä—Ö –∫–∞–Ω–≤–∞—Å–∞ */
}

.wire-point {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 4px solid #34495e; /* –¢–µ–º–Ω–∞—è —Ä–∞–º–∫–∞ */
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    transition: transform 0.2s, box-shadow 0.2s;
}

.wire-point:active {
    transform: scale(0.9);
}

/* –¶–≤–µ—Ç–∞ –ø—Ä–æ–≤–æ–¥–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —è—Ä–∫–∏–µ —Ü–≤–µ—Ç–∞) */
.wire-point[data-color="red"] { background: #ff4757; }
.wire-point[data-color="blue"] { background: #1e90ff; }
.wire-point[data-color="green"] { background: #2ed573; }
.wire-point[data-color="yellow"] { background: #ffa502; }

/* –°–æ—Å—Ç–æ—è–Ω–∏–µ "–í—ã–±—Ä–∞–Ω–æ" (–ø–µ—Ä–≤—ã–π –∫–ª–∏–∫) */
.wire-point.selected {
    border-color: white;
    box-shadow: 0 0 15px white;
    transform: scale(1.2);
}

/* –°–æ—Å—Ç–æ—è–Ω–∏–µ "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ" (–Ω–µ–ª—å–∑—è –∫–ª–∏–∫–∞—Ç—å) */
.wire-point.connected {
    opacity: 0.5;
    cursor: default;
    box-shadow: none;
    transform: none;
    border-color: #2c3e50;
}

/* === –£–†–û–í–ï–ù–¨ 2: JUMPER (–î–µ—Ç—Å–∫–∏–π —Å—Ç–∏–ª—å) === */

#doodle-ui {
    margin-bottom: 10px;
    background: white;
    padding: 10px;
    border-radius: 15px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    color: #2c3e50;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#doodle-ui h2 {
    margin: 0;
    font-size: 18px;
    color: #e67e22; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
}

#doodle-score {
    background: #3498db;
    color: white;
    padding: 5px 10px;
    border-radius: 10px;
    font-weight: bold;
    font-size: 18px;
    will-change: transform;
}

#doodle-container {
    position: relative;
    /* –ê–î–ê–ü–¢–ê–¶–ò–Ø: –¥–µ–ª–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω –∑–∞–º–µ—Ç–Ω–æ –±–æ–ª—å—à–µ */
    width: 100%;
    max-width: 520px;
    /* –í—ã—Å–æ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —ç–∫—Ä–∞–Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Ä–∞–Ω—å—à–µ –±—ã–ª–æ 60vh) */
    height: 74vh;
    min-height: 480px;

    margin: 0 auto;
    /* –Ø—Ä–∫–æ–µ –Ω–µ–±–æ –≤–º–µ—Å—Ç–æ —Ç–µ–º–Ω–æ–≥–æ —Ñ–æ–Ω–∞ */
    background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
    border: 4px solid #fff;
    border-radius: 20px; /* –°–∏–ª—å–Ω—ã–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è */
    box-shadow: 0 10px 20px rgba(0,0,0,0.15);

    overflow: hidden;
    touch-action: manipulation;

    /* PERF: –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ —Ç–æ–ª—å–∫–æ —ç—Ç–∏–º –±–ª–æ–∫–æ–º */
    contain: layout paint;
}

/* –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —É—Ä–æ–≤–Ω—è 2 (—Ç–µ–ª–µ—Ñ–æ–Ω) */
#doodle-controls {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 10px;
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
    pointer-events: none;
    z-index: 15;
}

#doodle-controls {
    transition: opacity 0.25s ease, transform 0.25s ease;
}

#doodle-controls.controls-hidden {
    opacity: 0;
    transform: translateY(10px);
    pointer-events: none;
}

#doodle-controls.controls-hint .doodle-control {
    animation: doodlePulse 1.1s ease-in-out infinite;
}

@keyframes doodlePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}

.doodle-control {
    pointer-events: auto;
    width: 54px;
    height: 54px;
    border-radius: 999px;
    border: 2px solid rgba(255,255,255,0.75);
    background: rgba(44, 62, 80, 0.55);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

.doodle-control:active {
    transform: scale(0.95);
}

.doodle-control .arrow {
    font-size: 28px;
    line-height: 1;
    color: #ffffff;
    text-shadow: 0 0 10px rgba(255,255,255,0.25);
}

#doodle-canvas {
    display: block;
    width: 100%;
    height: 100%;
}

/* –ö—Ä–∞—Å–∏–≤–∞—è –ø–ª–∞—à–∫–∞ —Å—Ç–∞—Ä—Ç–∞ */
#doodle-start-msg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.85); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –±–µ–ª—ã–π */
    color: #2c3e50;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
    cursor: pointer;
    z-index: 10;
    border-radius: 16px;
}

.tap-icon {
    font-size: 40px;
    margin-top: 10px;
    animation: bounce 1s infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.game-running #doodle-start-msg {
    display: none;
}

/* === –§–ò–ù–ê–õ –£–†–û–í–ù–Ø 2 === */
#factory-gate-container {
    display: none;
    margin-top: 20px;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.45s ease, transform 0.45s ease;
    will-change: opacity, transform;
}

/* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞ "–ó–ê–í–û–î –ó–ê–ü–£–©–ï–ù" */
#factory-gate-container.gate-visible {
    opacity: 1;
    transform: translateY(0);
}

#factory-gate-img {
    width: 100%;
    border-radius: 15px;
    border: 4px solid white;
    filter: brightness(0.2);
    transition: filter 2s, box-shadow 2s;
}

.lights-on #factory-gate-img {
    filter: brightness(1.2) contrast(1.1);
    box-shadow: 0 0 30px 10px rgba(255, 215, 0, 0.6);
}
/* –û–≤–µ—Ä–ª–µ–∏ (—ç–∫—Ä–∞–Ω—ã –ø–æ–≤–µ—Ä—Ö –∏–≥—Ä—ã) */
.game-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(44, 62, 80, 0.9); /* –¢–µ–º–Ω—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
    display: flex; /* Flex —á—Ç–æ–±—ã —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 20;
    opacity: 0;
    pointer-events: none; /* –ß—Ç–æ–±—ã –∫–ª–∏–∫–∏ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Å–∫–≤–æ–∑—å, –∫–æ–≥–¥–∞ —Å–∫—Ä—ã—Ç */
    transition: opacity 0.5s ease-in-out; /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ */
}

/* –ö–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–∏–º—ã–º */
.game-overlay.visible {
    opacity: 1;
    pointer-events: all;
}

#victory-overlay h1 {
    color: #f1c40f;
    font-size: 40px;
    text-shadow: 0 0 20px rgba(241, 196, 15, 0.8);
    transform: scale(0.5);
    transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.game-overlay.visible h1 {
    transform: scale(1);
}

.btn-restart {
    background: #e74c3c;
    color: white;
    border: none;
    padding: 15px 25px;
    font-size: 18px;
    border-radius: 30px;
    cursor: pointer;
    margin-top: 20px;
    box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}
#doodle-timer {
    font-family: monospace; /* –ß—Ç–æ–±—ã —Ü–∏—Ñ—Ä—ã –Ω–µ —Å–∫–∞–∫–∞–ª–∏ */
    font-size: 18px;
    font-weight: bold;
    color: #e74c3c; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∑–∞–º–µ—Ç–Ω–æ—Å—Ç–∏ */
    background: #ecf0f1;
    padding: 5px 8px;
    border-radius: 5px;
}
/* === –£–†–û–í–ï–ù–¨ 3: 2048 (–° –ö–ê–†–¢–ò–ù–ö–ê–ú–ò) === */
.game-2048-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 300px;
    margin: 0 auto 10px auto;
}

.score-box {
    background: #bbada0;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
    color: white;
}

#grid-container {
    width: 300px;
    height: 300px;
    background: #bbada0;
    border-radius: 10px;
    margin: 0 auto;
    position: relative;
    padding: 10px;
    box-sizing: border-box;
    touch-action: manipulation;
}

.grid-cell {
    width: 62.5px;
    height: 62.5px;
    background: rgba(238, 228, 218, 0.35);
    border-radius: 5px;
    position: absolute;
}

.tile {
    width: 62.5px;
    height: 62.5px;
    border-radius: 5px;
    position: absolute;
    z-index: 10;

    /* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫ */
    background-color: #eee4da; /* –§–æ–Ω –ø–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π (–µ—Å–ª–∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è) */
    background-repeat: no-repeat;
    background-position: center;
    background-size: 85%; /* –†–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–≤–∞–¥—Ä–∞—Ç–∞ */

    /* –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç (—Ü–∏—Ñ—Ä—ã), –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
    color: transparent;
    font-size: 0;

    /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è */
    transition: left 0.15s ease-in-out, top 0.15s ease-in-out, transform 0.1s;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è –∏ —Å–ª–∏—è–Ω–∏—è */
.tile-new { animation: appear 0.2s ease; }
.tile-merged { animation: pop 0.2s ease; z-index: 20; }

@keyframes appear {
    0% { opacity: 0; transform: scale(0); }
    100% { opacity: 1; transform: scale(1); }
}
@keyframes pop {
    0% { transform: scale(0.8); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* === –ü–†–ò–í–Ø–ó–ö–ê –ö–ê–†–¢–ò–ù–û–ö –ò –¶–í–ï–¢–û–í (NEON & BRIGHT) === */

/* –û–±—â–∏–π —Å—Ç–∏–ª—å –¥–ª—è –≤—Å–µ—Ö –ø–ª–∏—Ç–æ–∫ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ */
.tile {
    background-position: center;
    background-repeat: no-repeat;
    background-size: 80%; /* –ö–∞—Ä—Ç–∏–Ω–∫–∞ —á—É—Ç—å –º–µ–Ω—å—à–µ, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —è—Ä–∫–∏–π —Ñ–æ–Ω */
    border: 2px solid rgba(0,0,0,0.1); /* –¢–æ–Ω–∫–∞—è —Ç–µ–º–Ω–∞—è –æ–±–≤–æ–¥–∫–∞ –¥–ª—è —á–µ—Ç–∫–æ—Å—Ç–∏ */
    box-shadow: inset 0 0 10px rgba(255,255,255,0.4); /* –ë–ª–∏–∫ –≤–Ω—É—Ç—Ä–∏ */
}

/* 2: –ë–æ–ª—Ç - –Ø–¥–æ–≤–∏—Ç–æ-–≥–æ–ª—É–±–æ–π (Cyan) */
.tile-2 {
    background-image: url('assets/bolt.png');
    background-image: image-set(url('assets/bolt.webp') type('image/webp'), url('assets/bolt.png') type('image/png'));
    background-color: #00E5FF;
}

/* 4: –ì–∞–π–∫–∞ - –õ–∞–π–º–æ–≤—ã–π –∑–µ–ª–µ–Ω—ã–π */
.tile-4 {
    background-image: url('assets/nut.png');
    background-image: image-set(url('assets/nut.webp') type('image/webp'), url('assets/nut.png') type('image/png'));
    background-color: #32CD32;
}

/* 8: –®–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞ - –Ø—Ä–∫–∞—è –§—É–∫—Å–∏—è (–†–æ–∑–æ–≤—ã–π) */
.tile-8 {
    background-image: url('assets/gear.png');
    background-image: image-set(url('assets/gear.webp') type('image/webp'), url('assets/gear.png') type('image/png'));
    background-color: #FF00FF;
}

/* 16: –ú–∏–∫—Ä–æ—Å—Ö–µ–º–∞ - –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –û—Ä–∞–Ω–∂–µ–≤—ã–π */
.tile-16 {
    background-image: url('assets/chip.png');
    background-image: image-set(url('assets/chip.webp') type('image/webp'), url('assets/chip.png') type('image/png'));
    background-color: #FF6D00;
}

/* 32: –ü–ª–∞—Ç–∞ - –ì–ª—É–±–æ–∫–∏–π –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
.tile-32 {
    background-image: url('assets/board.png');
    background-image: image-set(url('assets/board.webp') type('image/webp'), url('assets/board.png') type('image/png'));
    background-color: #6200EA;
}

/* 64: –ö–æ—Ä–ø—É—Å - –ù–∞—Å—ã—â–µ–Ω–Ω—ã–π –ö—Ä–∞—Å–Ω—ã–π (–ú–∞–ª–∏–Ω–æ–≤—ã–π) */
.tile-64 {
    background-image: url('assets/case.png');
    background-image: image-set(url('assets/case.webp') type('image/webp'), url('assets/case.png') type('image/png'));
    background-color: #D50000;
}

/* 128: –î–∞—Ç—á–∏–∫ - –Ø—Ä–∫–∏–π –ò–Ω–¥–∏–≥–æ (–°–∏–Ω–∏–π) */
.tile-128 {
    background-image: url('assets/sensor.png');
    background-image: image-set(url('assets/sensor.webp') type('image/webp'), url('assets/sensor.png') type('image/png'));
    background-color: #2962FF;
}

/* –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–±–æ—Ä - –∑–æ–ª–æ—Ç–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
.tile-256 {
    background-image: url('assets/device.png');
    background-image: image-set(url('assets/device.webp') type('image/webp'), url('assets/device.png') type('image/png'));
    background-color: #edcc61;
    box-shadow: 0 0 15px #ffd700;
    background-size: 95%; /* –ß—É—Ç—å –∫—Ä—É–ø–Ω–µ–µ */
}

/* –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –∏–≥—Ä–æ–∫ –ø–æ–π–¥–µ—Ç –¥–∞–ª—å—à–µ 256 */
.tile-512 { background-image: url('assets/device.png');
    background-image: image-set(url('assets/device.webp') type('image/webp'), url('assets/device.png') type('image/png')); background-color: #333; }

.instruction {
    font-size: 14px;
    color: #bdc3c7;
    margin-top: 15px;
}
/* === –£–†–û–í–ï–ù–¨ 4: –ö–í–ò–ó === */
#quiz-progress {
    color: #95a5a6;
    font-size: 14px;
    margin-bottom: 20px;
}

#question-text {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 30px;
    min-height: 50px; /* –ß—Ç–æ–±—ã –Ω–µ –ø—Ä—ã–≥–∞–ª–æ */
}

.answer-btn {
    background-color: #34495e;
    color: white;
    width: 100%;
    padding: 15px;
    margin-bottom: 15px;
    border: none;
    border-radius: 10px;
    text-align: left;
    font-size: 16px;
    cursor: pointer;
    transition: transform 0.1s, background-color 0.2s;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.answer-btn:active {
    transform: scale(0.98);
}

/* –°–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ */
.answer-btn.correct {
    background-color: #2ecc71 !important; /* –ó–µ–ª–µ–Ω—ã–π */
    border: 2px solid #27ae60;
}

.answer-btn.wrong {
    background-color: #e74c3c !important; /* –ö—Ä–∞—Å–Ω—ã–π */
    border: 2px solid #c0392b;
    opacity: 0.6;
}

/* === –≠–ö–†–ê–ù –§–ò–ù–ê–õ–ê === */
.final-score-box {
    background: white;
    color: #2c3e50;
    padding: 20px;
    border-radius: 15px;
    font-size: 24px;
    font-weight: bold;
    margin: 30px 0;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

#final-score-val {
    color: #e67e22;
    font-size: 36px;
}
/* –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
.score-row {
    display: flex;
    justify-content: space-between;
    font-size: 18px;
    margin-bottom: 10px;
    color: #2c3e50;
    text-align: left;
}

.score-row span:last-child {
    font-weight: bold;
    color: #e67e22;
}

.score-row.total {
    font-size: 24px;
    font-weight: bold;
    color: #c0392b;
    margin-top: 15px;
}

hr {
    border: 0;
    border-top: 1px solid #bdc3c7;
    margin: 10px 0;
}
/* –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ */
#quiz-container {
    /* –ß—Ç–æ–±—ã –±–ª–æ–∫ –Ω–µ —Å—Ö–ª–æ–ø—ã–≤–∞–ª—Å—è, –µ—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –∫–æ—Ä–æ—Ç–∫–∏–π */
    min-height: 300px;

    /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */
    opacity: 1;

    /* –û–ß–ï–ù–¨ –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ */
    transition: opacity 0.5s ease-in-out;
}

/* –ö–ª–∞—Å—Å –¥–ª—è —Å–∫—Ä—ã—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è */
.quiz-hidden {
    opacity: 0;
    pointer-events: none; /* –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–ª–∏–∫–∏, –ø–æ–∫–∞ –Ω–µ–≤–∏–¥–∏–º–æ */
}


/* === –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω—è === */
.muted { opacity: 0.8; font-size: 14px; }

.level-list{
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    width: 100%;
    max-width: 420px;
    margin: 14px auto 0;
}
.level-card{
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 14px;
    padding: 12px;
    text-align: left;
}
.level-title{ font-weight: 700; margin-bottom: 6px; }
.level-stats{ font-size: 14px; opacity: 0.9; margin-bottom: 10px; }

.btn.btn-secondary{
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.18);
}

/* –ü–∞–∑–ª: –ø–æ–∑–≤–æ–ª—è–µ–º —Ä–∞–∑–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏ */
.puzzle-piece{
    background-image: url('assets/board.webp');
}



/* –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∏–∂–Ω—è—è –∫–Ω–æ–ø–∫–∞ "–ö —É—Ä–æ–≤–Ω—è–º" (–≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π) */
.bottombar {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 10px;
    display: flex;
    justify-content: center;
    z-index: 20;
    pointer-events: none; /* –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞ —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ */
}
.bottombar button {
    pointer-events: auto;
}



/* === Welcome screen centering === */
#screen-welcome.active {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    transform: translateY(100px);
}


/* ================================
   Aptitude test (–ø—Ä–æ—Ñ–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è)
   ================================ */

/* –ö–Ω–æ–ø–∫–∞ —Ç–µ—Å—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω–µ–π */
.levels-aptitude-wrap{
    display:flex;
    justify-content:center;
    margin: 10px 0 14px;
}
.levels-aptitude-wrap .btn{
    width: min(520px, 92vw);
}

/* –†–∞–∑—Ä–µ—à–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É/–∫–ª–∏–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–∞—Ö —Ç–µ—Å—Ç–∞ (–≤ WebView –∏–Ω–∞—á–µ –∫–Ω–æ–ø–∫–∏ –º–æ–≥—É—Ç –Ω–µ –Ω–∞–∂–∏–º–∞—Ç—å—Å—è –∏ –∫–æ–Ω—Ç–µ–Ω—Ç –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è) */
#screen-aptitude,
#screen-aptitude-result{
    /* –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö –≤–∞–∂–Ω–æ –Ω–µ –≤—ã–ª–µ–∑–∞—Ç—å –∑–∞ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π: –¥–µ–ª–∞–µ–º —á—É—Ç—å —É–∂–µ –∏ —Ä–æ–≤–Ω–æ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º */
    width: 92%;
    max-width: 720px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    touch-action: pan-y;
    /*
      –ó–∞–≥–æ–ª–æ–≤–æ–∫ "üß† –¢–µ—Å—Ç: —á—Ç–æ —Ç–µ–±–µ –ø–æ–¥—Ö–æ–¥–∏—Ç?" –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∏–∂–µ –≤–µ—Ä—Ö–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫.
      –ö–Ω–æ–ø–∫–∏ –ø–æ–¥–Ω–∏–º–∞–µ–º –≤—ã—à–µ (—Å–º. .topbar/.sound-toggle), –∞ —Å–∞–º —ç–∫—Ä–∞–Ω –æ–ø—É—Å–∫–∞–µ–º –Ω–∏–∂–µ.
    */
    padding-top: calc(env(safe-area-inset-top, 0px) + 92px);
    padding-bottom: 90px; /* –º–µ—Å—Ç–æ –ø–æ–¥ –Ω–∏–∂–Ω—é—é –∫–Ω–æ–ø–∫—É –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö */
    padding-left: 12px;
    padding-right: 12px;
    margin-left: auto;
    margin-right: auto;
}

/* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –∏ –æ—Ç–≤–µ—Ç—ã */
#screen-aptitude.active{
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.test-answers{
    width: 100%;
}
.test-answers .btn{
    text-align: center;
    justify-content: center;
}

.test-card{
    width: min(520px, 92vw);
    margin: 14px auto 0;
    background: rgba(0,0,0,0.25);
    border: 1px solid rgba(255,255,255,0.14);
    border-radius: 16px;
    padding: 14px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}
.test-progress{
    font-size: 13px;
    opacity: 0.85;
    margin-bottom: 10px;
}
.test-question{
    font-size: 18px;
    font-weight: 700;
    margin: 8px 0 12px;
    line-height: 1.25;
}
.test-answers{
    display: grid;
    gap: 10px;
}
.test-answers .btn{
    width: 100%;
    text-align: center;
    justify-content: center;
}
.test-footer{
    display:flex;
    justify-content:center;
    margin-top: 14px;
}

.result-card{
    width: min(620px, 92vw);
    margin: 14px auto 0;
    background: rgba(0,0,0,0.25);
    border: 1px solid rgba(255,255,255,0.14);
    border-radius: 16px;
    padding: 14px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    text-align: center;
    overflow: hidden; /* —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–ª–µ–∑–∞–ª–æ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º */
}
.result-title{
    font-size: 13px;
    opacity: 0.85;
}
.result-value{
    font-size: 22px;
    font-weight: 800;
    margin-top: 4px;
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
}
.result-value.secondary{
    font-size: 18px;
    font-weight: 700;
    opacity: 0.95;
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
}

/* –ü–ª–∞—à–∫—É —Å —Ç–µ–∫—Å—Ç–æ–º "–¢–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ..." —É–±—Ä–∞–ª–∏ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º */
.result-explain{ display:none !important; }

.result-bars{
    margin-top: 14px;
    display: grid;
    gap: 8px;
    width: min(520px, 92vw);
    margin-left: auto;
    margin-right: auto;
}
.result-bar{
    display: grid;
    grid-template-columns: minmax(140px, 180px) 1fr 44px;
    gap: 10px;
    align-items: center;
    font-size: 13px;
}

/* –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏ —à–∫–∞–ª (–¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ —Ç–∞–ø—É) */
.apt-label{
    background: transparent;
    border: none;
    padding: 0;
    margin: 0;
    color: inherit;
    font: inherit;
    cursor: pointer;
    text-align: left;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
}
.result-bar .pct{
    text-align: right;
    opacity: 0.9;
}

/* –ù–∞ –æ—á–µ–Ω—å —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –¥–µ–ª–∞–µ–º —Å—Ç—Ä–æ–∫–∏ —à–∫–∞–ª –¥–≤—É—Ö—Ä—è–¥–Ω—ã–º–∏: (–Ω–∞–∑–≤–∞–Ω–∏–µ + %), –∑–∞—Ç–µ–º –ø–æ–ª–æ—Å–∞ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
@media (max-width: 420px) {
    .result-bar{
        grid-template-columns: 1fr 44px;
        grid-template-areas:
          "label pct"
          "bar bar";
        row-gap: 6px;
        column-gap: 10px;
    }
    .result-bar .apt-label{ grid-area: label; }
    .result-bar .bar{ grid-area: bar; }
    .result-bar .pct{ grid-area: pct; }
}

.result-block{ text-align: center; }
.apt-label::after{
    content: "‚ìò";
    font-size: 12px;
    opacity: 0.75;
}
.apt-label:active{ opacity: 0.85; }

/* –í—Å–ø–ª—ã–≤–∞—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ */
.apt-tooltip{
    position: fixed;
    max-width: min(320px, calc(100vw - 24px));
    padding: 10px 12px;
    background: rgba(0, 0, 0, 0.78);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.18);
    border-radius: 12px;
    font-size: 13px;
    line-height: 1.35;
    z-index: 1000;
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
}
.apt-tooltip.hidden{ display: none; }
.result-bar .bar{
    height: 10px;
    background: rgba(255,255,255,0.10);
    border-radius: 999px;
    overflow: hidden;
}
.result-bar .fill{
    height: 100%;
    width: 0%;
    background: rgba(255,255,255,0.75);
}
.result-block{ margin-top: 14px; }
.result-subtitle{ font-weight: 800; margin-bottom: 8px; }
.result-list{
    margin: 0;
    padding-left: 0;
    list-style: none; /* —É–±—Ä–∞—Ç—å —Ç–æ—á–∫–∏ */
}
.result-chips{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    justify-content: center; /* —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ */
}
.chip{
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(255,255,255,0.10);
    border: 1px solid rgba(255,255,255,0.14);
    font-size: 13px;
    white-space: normal;
    text-align: center;
    max-width: min(520px, 92vw);
}
.result-actions{
    display:flex;
    gap:10px;
    justify-content:center;
    flex-wrap:wrap;
    margin-top: 16px;
}

/* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ –º–µ–Ω—é —É—Ä–æ–≤–Ω–µ–π */
.level-card.recommended{
    outline: 2px solid rgba(255,255,255,0.35);
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}
.level-card .recommend-badge{
    display:inline-block;
    margin-left: 8px;
    font-size: 14px;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
}
