<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>–ê–ü–ó ‚Äî –ö–≤–µ—Å—Ç</title>

    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="styles.css">

    <!-- Preload —Ä–µ—Å—É—Ä—Å–æ–≤ -->
    <link rel="preload" href="assets/hero.png" as="image">
    <link rel="preload" href="assets/platform.png" as="image">
    <link rel="preload" href="assets/part.png" as="image">

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>

<!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
<div id="screen-welcome" class="screen active">
    <h1>üè≠ –ê–ü–ó –ö–í–ï–°–¢</h1>
    <p>–ü—Ä–æ–π–¥–∏ 4 —É—Ä–æ–≤–Ω—è –∏ —Å–æ–±–µ—Ä–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª!</p>
    <button class="btn" onclick="startGame(1)">–ù–∞—á–∞—Ç—å</button>
</div>

<!-- –£—Ä–æ–≤–µ–Ω—å 1: –ü–∞–∑–ª -->
<div id="screen-level1" class="screen">
    <h2>üß© –£—Ä–æ–≤–µ–Ω—å 1: –õ–æ–≥–æ—Ç–∏–ø</h2>
    <p>–°–æ–±–µ—Ä–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –Ω–∞–∂–∏–º–∞—è –Ω–∞ –¥–≤–µ –∫–ª–µ—Ç–∫–∏ –¥–ª—è –æ–±–º–µ–Ω–∞</p>
    <div id="puzzle-board"></div>
    <p id="puzzle-status"></p>
    <button id="btn-next-2" class="btn hidden" onclick="startGame(2)">–î–∞–ª–µ–µ ‚Üí</button>
</div>

<!-- –£—Ä–æ–≤–µ–Ω—å 2: –î–∂–∞–º–ø–µ—Ä -->
<div id="screen-level2" class="screen">
    <div id="doodle-ui">
        <div id="doodle-timer">‚è± 00:00</div>
        <h2>–°–æ–±–µ—Ä–∏ —ç–ª–µ–º–µ–Ω—Ç—ã</h2>
        <div><span id="doodle-score">0</span> / 12</div>
    </div>

    <div id="doodle-container">
        <canvas id="doodle-canvas"></canvas>

        <div id="doodle-start-msg">
            <p>–¢–∞–ø–Ω–∏ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞!</p>
            <div class="tap-icon">üëÜ</div>
        </div>

        <div id="game-over-overlay" class="game-overlay">
            <h3>–û–π! –£–ø–∞–ª üò¢</h3>
            <button class="btn-restart" onclick="startDoodle()">üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
        </div>

        <div id="victory-overlay" class="game-overlay">
            <h1>üèÜ –£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</h1>
        </div>
    </div>

    <button id="btn-next-3" class="btn hidden" onclick="startGame(3)">–î–∞–ª–µ–µ ‚Üí</button>
</div>

<!-- –£—Ä–æ–≤–µ–Ω—å 3: 2048 -->
<div id="screen-level3" class="screen">
    <h2>üè≠ –°–±–æ—Ä–æ—á–Ω—ã–π —Ü–µ—Ö</h2>
    <div class="game-2048-header">
        <div class="score-box">–°—á–µ—Ç: <span id="score-2048">0</span></div>
        <button onclick="init2048()" class="reload-btn">üîÑ</button>
    </div>

    <div id="grid-container"></div>
    <button id="btn-next-4" class="btn hidden" onclick="startGame(4)">–ö–≤–∏–∑ ‚Üí</button>
</div>

<!-- –£—Ä–æ–≤–µ–Ω—å 4: –ö–≤–∏–∑ -->
<div id="screen-level4" class="screen">
    <h2>üß† –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–≤–∏–∑</h2>
    <div id="quiz-progress"></div>
    <div id="quiz-container">
        <div id="question-text"></div>
        <div id="answers-block"></div>
    </div>
</div>

<!-- –§–∏–Ω–∞–ª -->
<div id="screen-final" class="screen">
    <h1>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h1>
    <p>–°–º–µ–Ω–∞ –æ–∫–æ–Ω—á–µ–Ω–∞ ‚Äî –≤–æ—Ç —Ç–≤–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</p>

    <div class="final-score-box">
        <div class="score-row">–ü–∞–∑–ª: <span id="res-l1">0</span></div>
        <div class="score-row">–î–∂–∞–º–ø–µ—Ä: <span id="res-l2">0</span></div>
        <div class="score-row">2048: <span id="res-l3">0</span></div>
        <div class="score-row">–ö–≤–∏–∑: <span id="res-l4">0</span></div>
        <hr>
        <div class="score-row total">–ò–¢–û–ì–û: <span id="total-score">0</span></div>
    </div>

    <button class="btn" onclick="sendResults()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
</div>

<!-- –ú–æ–¥—É–ª–∏ -->
<script type="module">
    import { startGame, sendResults } from "./js/core.js";
    window.startGame = startGame;
    window.sendResults = sendResults;
</script>

</body>
</html>
