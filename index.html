<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ó–∞–≤–æ–¥ –ê–ü–ó</title>
    <link rel="stylesheet" href="styles.css">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¢–µ–ª–µ–≥—Ä–∞–º–∞ -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

    <!-- –≠–∫—Ä–∞–Ω 1: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
    <div id="screen-welcome" class="screen active">
        <h1>üè≠ –ê–ü–ó –ö–í–ï–°–¢</h1>
        <p>–ü—Ä–æ–π–¥–∏ 3 –∏—Å–ø—ã—Ç–∞–Ω–∏—è –∏ —Å–æ–±–µ—Ä–∏ –ø—Ä–∏–∑—ã!</p>
        <button class="btn" onclick="startGame(1)">–ù–∞—á–∞—Ç—å 1 —É—Ä–æ–≤–µ–Ω—å</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 2: –ü–∞–∑–ª (–£—Ä–æ–≤–µ–Ω—å 1) -->
    <div id="screen-level1" class="screen">
        <h2>üß© –£—Ä–æ–≤–µ–Ω—å 1: –õ–æ–≥–æ—Ç–∏–ø</h2>
        <p>–°–æ–±–µ—Ä–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É (–∫–ª–∏–∫–Ω–∏ –Ω–∞ –¥–≤–µ –∫–ª–µ—Ç–∫–∏, —á—Ç–æ–±—ã –ø–æ–º–µ–Ω—è—Ç—å –∏—Ö –º–µ—Å—Ç–∞–º–∏)</p>
        <div id="puzzle-board"></div>
        <p id="puzzle-status"></p>
        <button id="btn-next-2" class="btn hidden" onclick="startGame(2)">–î–∞–ª–µ–µ ‚Üí</button>
    </div>

    <!-    <!-- –≠–∫—Ä–∞–Ω 3: –î–∂–∞–º–ø–µ—Ä (–£—Ä–æ–≤–µ–Ω—å 2) -->
    <div id="screen-level2" class="screen">
            <!-- –í–Ω—É—Ç—Ä–∏ <div id="screen-level2" ...> -->

        <div id="doodle-ui">
            <!-- –¢–∞–π–º–µ—Ä —Å–ª–µ–≤–∞ -->
            <div id="doodle-timer">‚è± 00:00</div>
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ —Ü–µ–Ω—Ç—Ä—É (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ –≤–ª–µ–∑–∞–µ—Ç –Ω–∞ –º–µ–ª–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö) -->
            <h2 style="font-size: 14px; margin: 0 10px;">–°–æ–±–µ—Ä–∏ –¥–µ—Ç–∞–ª–∏</h2>
            <!-- –°—á–µ—Ç —Å–ø—Ä–∞–≤–∞ -->
            <div><span id="doodle-score">0</span> / 12</div>
        </div>

                <!-- –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ -->
        <div id="doodle-container">
            <canvas id="doodle-canvas"></canvas>

            <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
            <div id="doodle-start-msg" onclick="startDoodleLoop()">
                <p>–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!</p>
                <div class="tap-icon">üëÜ</div>
                <p style="font-size: 14px; color: #7f8c8d; margin-top: 20px;">
                    –¢–∞–ø–∞–π –≤–ª–µ–≤–æ –∏–ª–∏ –≤–ø—Ä–∞–≤–æ
                </p>
            </div>

            <!-- –≠–∫—Ä–∞–Ω –ü–û–†–ê–ñ–ï–ù–ò–Ø (—Å–∫—Ä—ã—Ç) -->
            <div id="game-over-overlay" class="game-overlay">
                <h3>–û–π, —É–ø–∞–ª! üò¢</h3>
                <button class="btn-restart" onclick="startDoodleLoop()">üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
            </div>

            <!-- –≠–∫—Ä–∞–Ω –ü–û–ë–ï–î–´ (—Å–∫—Ä—ã—Ç) -->
            <div id="victory-overlay" class="game-overlay">
                <h1>üèÜ –ü–û–ë–ï–î–ê!</h1>
            </div>
        </div>

        <div id="factory-gate-container">
            <h3>‚ú® –ó–ê–í–û–î –ó–ê–ü–£–©–ï–ù! ‚ú®</h3>
            <img id="factory-gate-img" src="assets/gate.jpg" alt="–ü—Ä–æ—Ö–æ–¥–Ω–∞—è">
        </div>

        <button id="btn-next-3" class="btn hidden" onclick="startGame(3)">–î–∞–ª–µ–µ ‚Üí</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 4: –ò–≥—Ä–∞ 2048 (–£—Ä–æ–≤–µ–Ω—å 3) -->
    <div id="screen-level3" class="screen">
        <h2>üè≠ –°–±–æ—Ä–æ—á–Ω—ã–π —Ü–µ—Ö</h2>
        <p>–°–æ–µ–¥–∏–Ω—è–π –¥–µ—Ç–∞–ª–∏, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å <b>–ü—Ä–∏–±–æ—Ä (256)</b>!</p>

        <div class="game-2048-header">
            <div class="score-box">–°—á–µ—Ç: <span id="score-2048">0</span></div>
            <button onclick="init2048()" style="font-size: 20px; background:none; border:none; cursor:pointer;">üîÑ</button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã (relative) -->
        <div style="position: relative; width: 300px; margin: 0 auto;">
            <div id="grid-container">
                <!-- –Ø—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏ -->
            </div>

            <!-- –û–í–ï–†–õ–ï–ô –ü–û–†–ê–ñ–ï–ù–ò–Ø -->
            <div id="overlay-2048-gameover" class="game-overlay" style="border-radius: 10px;">
                <h3>–¶–µ—Ö –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω! üòî</h3>
                <p style="color: white; font-size: 14px;">–ú–µ—Å—Ç–∞ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å.</p>
                <button class="btn-restart" onclick="init2048()">üîÑ –û—á–∏—Å—Ç–∏—Ç—å –ª–∏–Ω–∏—é</button>
            </div>

            <!-- –û–í–ï–†–õ–ï–ô –ü–û–ë–ï–î–´ -->
            <div id="overlay-2048-victory" class="game-overlay" style="border-radius: 10px;">
                <h1>üèÜ –ì–û–¢–û–í–û!</h1>
                <p style="color: #f1c40f;">–ü—Ä–∏–±–æ—Ä —Å–æ–±—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ!</p>
            </div>
        </div>

        <p class="instruction">–°–≤–∞–π–ø–∞–π (–ª–∏—Å—Ç–∞–π) –ø–∞–ª—å—Ü–µ–º,<br>—á—Ç–æ–±—ã –¥–≤–∏–≥–∞—Ç—å –¥–µ—Ç–∞–ª–∏</p>

        <button id="btn-next-4" class="btn hidden" onclick="startGame(4)">–ö–≤–∏–∑ ‚Üí</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 5: –ö–≤–∏–∑ (–£—Ä–æ–≤–µ–Ω—å 4) -->
    <div id="screen-level4" class="screen">
        <h2>üß† –£—Ä–æ–≤–µ–Ω—å 4: –ó–Ω–∞–Ω–∏—è</h2>
        <div id="quiz-progress">–í–æ–ø—Ä–æ—Å 1</div>
        <div id="quiz-container">
            <div id="question-text">...</div>
            <div id="answers-block"></div>
        </div>
    </div>
        <!-- –≠–∫—Ä–∞–Ω 5: –§–∏–Ω–∞–ª (–û–±—â–∏–π –∏—Ç–æ–≥) -->
    <div id="screen-final" class="screen">
        <h1>üéâ –§–ò–ù–ò–®!</h1>
        <p>–¢–≤–æ—è —Å–º–µ–Ω–∞ –Ω–∞ –∑–∞–≤–æ–¥–µ –æ–∫–æ–Ω—á–µ–Ω–∞.</p>

        <div class="final-score-box">
            <div class="score-row">
                <span>üß© –ü–∞–∑–ª:</span> <span id="res-l1">0</span>
            </div>
            <div class="score-row">
                <span>üèÉ –î–∂–∞–º–ø–µ—Ä:</span> <span id="res-l2">0</span>
            </div>
            <div class="score-row">
                <span>üè≠ –°–±–æ—Ä–∫–∞ 2048:</span> <span id="res-l3">0</span>
            </div>
            <div class="score-row">
                <span>üß† –ö–≤–∏–∑:</span> <span id="res-l4">0</span>
            </div>
            <hr>
            <div class="score-row total">
                <span>–ò–¢–û–ì–û:</span> <span id="final-score-val">0</span>
            </div>
        </div>

        <button class="btn" onclick="closeApp()">üíæ –°–û–•–†–ê–ù–ò–¢–¨ –†–ï–ó–£–õ–¨–¢–ê–¢</button>
    </div>
    <script src="script.js"></script>
</body>
</html>